<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lightweight Charts K线 Demo</title>

    <!-- 使用 v4.1.0，确保 addCandlestickSeries 可用 -->
    <script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        body {
            margin: 0;
            background: #1a1a2e;
            color: #e6e6e6;
        }
        #chart {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>

<div id="chart"></div>

<script>
    const chartContainer = document.getElementById("chart");

    const chart = LightweightCharts.createChart(chartContainer, {
        layout: { background: { color: "#1a1a2e" }, textColor: "#e6e6e6" },
        grid: {
            vertLines: { color: "rgba(255,255,255,0.1)" },
            horzLines: { color: "rgba(255,255,255,0.1)" }
        },
        timeScale: { borderColor: "#444" },
        rightPriceScale: { borderColor: "#444" }
    });

    // K 线图
    const candleSeries = chart.addCandlestickSeries({
        upColor: "#4ecca3",
        downColor: "#e84545",
        borderUpColor: "#4ecca3",
        borderDownColor: "#e84545",
        wickUpColor: "#4ecca3",
        wickDownColor: "#e84545",
    });

    // 示例数据
    candleSeries.setData([
        { time: "2024-01-01", open: 100, high: 110, low: 95, close: 108 },
        { time: "2024-01-02", open: 108, high: 115, low: 105, close: 112 },
        { time: "2024-01-03", open: 112, high: 120, low: 108, close: 118 },
        { time: "2024-01-04", open: 118, high: 125, low: 110, close: 111 },
        { time: "2024-01-05", open: 111, high: 116, low: 100, close: 105 },
    ]);

    // 自适应尺寸
    new ResizeObserver(() => {
        chart.applyOptions({
            width: chartContainer.clientWidth,
            height: chartContainer.clientHeight,
        });
    }).observe(chartContainer);
</script>

</body>
</html>
